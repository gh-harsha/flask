<!-- <!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Property Details Form</title>
<script>
let doIt=()=>{
  let button = document.querySelector("button");
  button.disabled = true; // Disable the button after the first click
  let tab=document.getElementById("tab1");
  let rows=tab1.getElementsByTagName('tr');
  fetch('https://harshagh.uksouth.cloudapp.azure.com:8080/getpropertydetails')
    .then(response => response.json())
    .then(data=>data.Results.forEach(  //.slice(0,3)
      x=>{
        let newRow=rows[0].cloneNode(true);
        let divs=newRow.getElementsByTagName('td');
        divs[0].innerHTML=x['id'];
        divs[1].innerHTML=x['PropertyType'];
        divs[2].innerHTML=x['Bedrooms'];
        divs[3].innerHTML=x['Bathrooms'];
        divs[4].innerHTML=x['FloorNumber'];
        divs[5].innerHTML=x['TotalFloors'];
        divs[6].innerHTML=x['Price'];
        divs[7].innerHTML=x['OwnershipType'];
        divs[8].innerHTML=x['Furnished'];
        divs[9].innerHTML=x['LuxuryAmenities'];
        divs[10].innerHTML=x['PossessionStatus'];
        divs[11].innerHTML=x['TransactionType'];
        divs[12].innerHTML=x['UserType'];
        divs[13].innerHTML=x['CompanyName'];
        divs[14].innerHTML=x['OwnerName'];
        divs[15].innerHTML=x['Rating'];
        tab1.appendChild(newRow);
        tab1.insertBefore(newRow, rows[1]);
      }
    )
  );
}
</script>
</head>
<body>
<button onClick="doIt()">Press me</button>
This is where the results turn up: <br/>
<table id='tab1' style="width: 100%; border-collapse: collapse; margin-top: 20px; font-family: Arial, sans-serif;">
<tr><td style="padding: 10px; text-align: left; border: 1px solid #ddd;">id</td>
    <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">PropertyType</td>
    <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">Bedrooms</td>
    <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">Bathrooms</td>
    <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">FloorNumber</td>
    <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">TotalFloors</td>
    <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">Price</td>
    <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">OwnershipType</td>
    <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">Furnished</td>
    <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">LuxuryAmenities</td>
    <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">PossessionStatus</td>
    <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">TransactionType</td>
    <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">UserType</td>
    <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">CompanyName</td>
    <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">OwnerName</td>
    <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">Rating</td>
</tr>
</body>


</html>
 -->
 <!DOCTYPE html>
 <html>
 <head>
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width">
 <title>Property Details Form</title>
 <script>
 async function doIt() {
   const button = document.querySelector("button");
   button.disabled = true; // Disable the button after the first click
 
   const tab = document.getElementById("tab1");
   const templateRow = tab.getElementsByTagName('tr')[0]; // Cache the template row
 
   try {
     const response = await fetch('https://harshagh.uksouth.cloudapp.azure.com:8080/getpropertydetails');
     if (!response.ok) {
       throw new Error(`HTTP error! status: ${response.status}`);
     }
 
     const data = await response.json();
 
     // Use DocumentFragment for efficient DOM manipulation
     const fragment = document.createDocumentFragment();
 
     data.Results.forEach(item => {
       const newRow = templateRow.cloneNode(true);
       const cells = newRow.getElementsByTagName('td');
 
       cells[0].innerHTML = item['id'];
       cells[1].innerHTML = item['PropertyType'];
       cells[2].innerHTML = item['Bedrooms'];
       cells[3].innerHTML = item['Bathrooms'];
       cells[4].innerHTML = item['FloorNumber'];
       cells[5].innerHTML = item['TotalFloors'];
       cells[6].innerHTML = item['Price'];
       cells[7].innerHTML = item['OwnershipType'];
       cells[8].innerHTML = item['Furnished'];
       cells[9].innerHTML = item['LuxuryAmenities'];
       cells[10].innerHTML = item['PossessionStatus'];
       cells[11].innerHTML = item['TransactionType'];
       cells[12].innerHTML = item['UserType'];
       cells[13].innerHTML = item['CompanyName'];
       cells[14].innerHTML = item['OwnerName'];
       cells[15].innerHTML = item['Rating'];
 
       tab.insertBefore(newRow, tab.getElementsByTagName('tr')[1]);
     });
 
     // Append all rows to the table at once
     tab.appendChild(fragment);
   } catch (error) {
     console.error("Error fetching data:", error);
     alert("Failed to load property details. Please try again later.");
   }
 }
 </script>
 </head>
 <body>
   <button onClick="doIt()">Press me</button>
   <p>This is where the results turn up:</p>
   <table id="tab1" style="width: 100%; border-collapse: collapse; margin-top: 20px; font-family: Arial, sans-serif;">
     <tr>
       <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">id</td>
       <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">PropertyType</td>
       <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">Bedrooms</td>
       <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">Bathrooms</td>
       <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">FloorNumber</td>
       <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">TotalFloors</td>
       <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">Price</td>
       <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">OwnershipType</td>
       <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">Furnished</td>
       <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">LuxuryAmenities</td>
       <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">PossessionStatus</td>
       <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">TransactionType</td>
       <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">UserType</td>
       <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">CompanyName</td>
       <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">OwnerName</td>
       <td style="padding: 10px; text-align: left; border: 1px solid #ddd;">Rating</td>
     </tr>
   </table>
 </body>
 </html>
 